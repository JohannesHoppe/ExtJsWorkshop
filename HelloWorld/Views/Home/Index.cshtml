@using HelloWorld.Controllers
@model HelloWorld.Models.Todo             

@{        
    /* Reflection */
    
    var reader = Html.X().JsonReader()
        .Root("Data")
        .TotalProperty("Total");

    var proxy = Html.X().AjaxProxy()
        .Url(TodoController.Url)
        .Reader(reader);

    var store = Html.X().StoreForModel()
        .Proxy(proxy)
        .AutoLoad(true)
        .RemotePaging(false)
        .RemoteSort(false)
        .PageSize(15);
}


@{
    ViewBag.Title = "Simple Array Grid - Ext.NET MVC Examples";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section headtag
    {
    <style>
        .x-grid-row-over .x-grid-cell-inner {
            font-weight: bold;
        }
    </style>

    <script>
            var template = '<span style="color:{0};">{1}</span>';

            var doneRenderer = function (value) {
                return Ext.String.format(template, value ? "green" : "red", value);
            };
    </script>
}
      

@(Html.X().Window()
      .ID("test")
      .Title("test")
      .Height(300)
      .Width(600)
      .Layout(LayoutType.Fit)
      .Items(
      
          Html.X().GridPanel()
              .Title("Array Grid")
              .Store(store)
              .ColumnModel(
                    Html.X().ColumnFor(m => m.Id).ToBuilder<Column.Builder>().Width(50),    
                    Html.X().ColumnFor(m => m.Title).ToBuilder<Column.Builder>().Text("Titel"),    
                    Html.X().ColumnFor(m => m.Description).ToBuilder<Column.Builder>().Text("Beschreibung"),    
               Html.X().Column().Text("Done").DataIndex("Done").Renderer("doneRenderer")
              )
      ))
